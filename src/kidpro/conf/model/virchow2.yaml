name: virchow2
arch: virchow2

# --- LongNet MIL head knobs ---
longnet_dim: 1024
longnet_depth: 24
longnet_slide_ngrids: 1000
longnet_max_wsi_size: 262144
longnet_dropout: 0.25

num_classes: 2
in_channels: 3
pretrained: false

# --- Weights loading (network-robust) ---
# source: local | hf_cache
weights:
  source: local
  local_path: /home/khdp-user/workspace/huggingface_cache/virchow2/model.pt
  hf_cache_path: /home/khdp-user/workspace/huggingface_cache/

# --- LORA knobs ---
lora:
  enabled: true
  r: 8
  alpha: 16
  dropout: 0.05
  bias: none
  target_modules:
    - "q_proj"
    - "k_proj"
    - "v_proj"
    - "o_proj"
    - "out_proj"
    - "proj"
    - "qkv"

freeze_backbone: true

# --- Foundation backbone ---
foundation_dim: 1024

# --- Input expectations (used by transforms via data.patch_size today) ---
input_size: 256
